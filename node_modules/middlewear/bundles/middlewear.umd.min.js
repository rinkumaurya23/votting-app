!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("middlewear",["exports","@angular/core","@angular/common/http"],t):t(e.middlewear={},e.ng.core,e.ng.common.http)}(this,function(e,t,r){"use strict";var n=(o.prototype.getCollectionByQuery=function(e){var r=this;return e=e||"",this.http.get((void 0).apiUrl+"category/"+e).subscribe(function(e){console.log(e);var t=e.universes.universe[0];r.mapFredHopperProductsToProduct(t["items-section"].items.item),r.mapFredHopperFacetMapToFacetMap(t.facetmap[0].filter),r.mapFredHopperBreadcrumbsToBreadcrumbs(t.breadcrumbs)})},o.prototype.mapFredHopperBreadcrumbsToBreadcrumbs=function(e){this.breadcrumbs.emit(e)},o.prototype.mapFredHopperFacetMapToFacetMap=function(e){var t;t=e,this.facets.emit(t)},o.prototype.mapFredHopperProductsToProduct=function(e){var p=[];e.forEach(function(e){var t=e.id,r=e.attribute.find(function(e){return e.name="name"}).value[0].value,n=e.attribute.find(function(e){return"original_price"===e.name}).value[0].value,o=e.attribute.find(function(e){return"price"===e.name}),i=o.value[0].value!==n?o.value[0].value:"",a=e.attribute.find(function(e){return"_thumburl"===e.name}).value[0].value,u=e.attribute.find(function(e){return"brand"===e.name}),c=u.value[0].value?u.value[0].value:"";p.push(new d(t,r,a,n,i,c))}),this.items.emit(p)},o.prototype.navigateTo=function(e){this.getCollectionByQuery(e)},o.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],o.ctorParameters=function(){return[{type:r.HttpClient}]},o.ngInjectableDef=t.defineInjectable({factory:function(){return new o(t.inject(r.HttpClient))},token:o,providedIn:"root"}),o);function o(e){this.http=e,this.items=new t.EventEmitter,this.facets=new t.EventEmitter,this.breadcrumbs=new t.EventEmitter}var d=function c(e,t,r,n,o,i){this.id=e,this.name=t,this.originalPrice=parseFloat(n.replace(/[^0-9\.-]+/g,"")),this.salePrice=parseFloat(o.replace(/[^0-9\.-]+/g,"")),this.image=r,this.brand=i},i=new t.InjectionToken("API_HOST"),a=(u.forRoot=function(e){return{ngModule:u,providers:[{provide:i,useValue:e}]}},u.decorators=[{type:t.NgModule,args:[{imports:[r.HttpClientModule],providers:[n]}]}],u);function u(){}e.MiddlewareService=n,e.Product=d,e.API_HOST=i,e.MiddlewearModule=a,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=middlewear.umd.min.js.map
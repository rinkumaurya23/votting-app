/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable, EventEmitter } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
// import { environment } from 'environments/environment';
/** @type {?} */
var environment;
var MiddlewareService = /** @class */ (function () {
    function MiddlewareService(http) {
        this.http = http;
        this.items = new EventEmitter();
        this.facets = new EventEmitter();
        this.breadcrumbs = new EventEmitter();
    }
    /**
     * @param {?=} url
     * @return {?}
     */
    MiddlewareService.prototype.getCollectionByQuery = /**
     * @param {?=} url
     * @return {?}
     */
    function (url) {
        var _this = this;
        url = url ? url : '';
        return this.http.get(environment.apiUrl + 'category/' + url).subscribe((/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            console.log(data);
            /** @type {?} */
            var result = data.universes.universe[0];
            _this.mapFredHopperProductsToProduct(result['items-section'].items.item);
            _this.mapFredHopperFacetMapToFacetMap(result.facetmap[0].filter);
            _this.mapFredHopperBreadcrumbsToBreadcrumbs(result.breadcrumbs);
        }));
    };
    /**
     * @param {?} breadcrumbObject
     * @return {?}
     */
    MiddlewareService.prototype.mapFredHopperBreadcrumbsToBreadcrumbs = /**
     * @param {?} breadcrumbObject
     * @return {?}
     */
    function (breadcrumbObject) {
        /** @type {?} */
        var breadcrumbs = [];
        this.breadcrumbs.emit(breadcrumbObject);
    };
    /**
     * @param {?} listOfFredHopperFacetMaps
     * @return {?}
     */
    MiddlewareService.prototype.mapFredHopperFacetMapToFacetMap = /**
     * @param {?} listOfFredHopperFacetMaps
     * @return {?}
     */
    function (listOfFredHopperFacetMaps) {
        /** @type {?} */
        var facets = [];
        facets = listOfFredHopperFacetMaps;
        this.facets.emit(facets);
    };
    /**
     * @param {?} listOfFredHopperProducts
     * @return {?}
     */
    MiddlewareService.prototype.mapFredHopperProductsToProduct = /**
     * @param {?} listOfFredHopperProducts
     * @return {?}
     */
    function (listOfFredHopperProducts) {
        /** @type {?} */
        var items = [];
        listOfFredHopperProducts.forEach((/**
         * @param {?} element
         * @return {?}
         */
        function (element) {
            /** @type {?} */
            var id = element.id;
            /** @type {?} */
            var nameElement = element.attribute.find((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.name = 'name'; }));
            /** @type {?} */
            var name = nameElement.value[0].value;
            /** @type {?} */
            var originalPriceElement = element.attribute.find((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.name === 'original_price'; }));
            /** @type {?} */
            var originalPrice = originalPriceElement.value[0].value;
            /** @type {?} */
            var currentPriceElement = element.attribute.find((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.name === 'price'; }));
            /** @type {?} */
            var salePrice = currentPriceElement.value[0].value !== originalPrice ? currentPriceElement.value[0].value : '';
            /** @type {?} */
            var imageElement = element.attribute.find((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.name === '_thumburl'; }));
            /** @type {?} */
            var image = imageElement.value[0].value;
            /** @type {?} */
            var brandElement = element.attribute.find((/**
             * @param {?} x
             * @return {?}
             */
            function (x) { return x.name === 'brand'; }));
            /** @type {?} */
            var brand = brandElement.value[0].value ? brandElement.value[0].value : '';
            items.push(new Product(id, name, image, originalPrice, salePrice, brand));
        }));
        this.items.emit(items);
    };
    /**
     * @param {?} url
     * @return {?}
     */
    MiddlewareService.prototype.navigateTo = /**
     * @param {?} url
     * @return {?}
     */
    function (url) {
        this.getCollectionByQuery(url);
    };
    MiddlewareService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    MiddlewareService.ctorParameters = function () { return [
        { type: HttpClient }
    ]; };
    /** @nocollapse */ MiddlewareService.ngInjectableDef = i0.defineInjectable({ factory: function MiddlewareService_Factory() { return new MiddlewareService(i0.inject(i1.HttpClient)); }, token: MiddlewareService, providedIn: "root" });
    return MiddlewareService;
}());
export { MiddlewareService };
if (false) {
    /** @type {?} */
    MiddlewareService.prototype.items;
    /** @type {?} */
    MiddlewareService.prototype.facets;
    /** @type {?} */
    MiddlewareService.prototype.breadcrumbs;
    /**
     * @type {?}
     * @private
     */
    MiddlewareService.prototype.http;
}
var Product = /** @class */ (function () {
    function Product(id, name, image, originalPrice, salePrice, brand) {
        this.id = id;
        this.name = name;
        this.originalPrice = parseFloat(originalPrice.replace(/[^0-9\.-]+/g, ''));
        this.salePrice = parseFloat(salePrice.replace(/[^0-9\.-]+/g, ''));
        this.image = image;
        this.brand = brand;
    }
    return Product;
}());
export { Product };
if (false) {
    /** @type {?} */
    Product.prototype.id;
    /** @type {?} */
    Product.prototype.name;
    /** @type {?} */
    Product.prototype.originalPrice;
    /** @type {?} */
    Product.prototype.salePrice;
    /** @type {?} */
    Product.prototype.image;
    /** @type {?} */
    Product.prototype.brand;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWlkZGxld2Vhci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbWlkZGxld2Vhci8iLCJzb3VyY2VzIjpbImxpYi9taWRkbGV3ZWFyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3pELE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQzs7Ozs7SUFFOUMsV0FBVztBQUdmO0lBUUUsMkJBQTZCLElBQWdCO1FBQWhCLFNBQUksR0FBSixJQUFJLENBQVk7UUFKN0MsVUFBSyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDM0IsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFDNUIsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO0lBRWdCLENBQUM7Ozs7O0lBRWxELGdEQUFvQjs7OztJQUFwQixVQUFxQixHQUFZO1FBQWpDLGlCQVVHO1FBVEQsR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDckIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsTUFBTSxHQUFHLFdBQVcsR0FBRyxHQUFHLENBQUMsQ0FBQyxTQUFTOzs7O1FBQ3BFLFVBQUMsSUFBUztZQUNSLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7O2dCQUNaLE1BQU0sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDekMsS0FBSSxDQUFDLDhCQUE4QixDQUFDLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDeEUsS0FBSSxDQUFDLCtCQUErQixDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7WUFD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QUFVLFNBQUM7b0JBQ1YsVUFBVSxFQUFFLE1BQU07aUJBQ25COzs7O2dCQVBRLFVBQVU7Ozs0QkFEbkI7Q0ErREMsQUF6REQsSUF5REM7U0F0RFksaUJBQWlCOzs7SUFDNUIsa0NBQTJCOztJQUMzQixtQ0FBNEI7O0lBQzVCLHdDQUFpQzs7Ozs7SUFFckIsaUNBQWlDOztBQW1EL0M7SUFDRSxpQkFBWSxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxhQUFhLEVBQUUsU0FBVSxFQUFHLEtBQU07UUFDN0QsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFDYixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztRQUNqQixJQUFJLENBQUMsYUFBYSxHQUFHLFVBQVUsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLGFBQWEsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzFFLElBQUksQ0FBQyxTQUFTLEdBQUcsVUFBVSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDbEUsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7SUFFckIsQ0FBQztJQU9ILGNBQUM7QUFBRCxDQUFDLEFBaEJELElBZ0JDOzs7O0lBTkMscUJBQVc7O0lBQ1gsdUJBQWE7O0lBQ2IsZ0NBQXNCOztJQUN0Qiw0QkFBbUI7O0lBQ25CLHdCQUFjOztJQUNkLHdCQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSwgRXZlbnRFbWl0dGVyIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuLy8gaW1wb3J0IHsgZW52aXJvbm1lbnQgfSBmcm9tICdlbnZpcm9ubWVudHMvZW52aXJvbm1lbnQnO1xubGV0IGVudmlyb25tZW50O1xuXG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIE1pZGRsZXdhcmVTZXJ2aWNlIHtcbiAgaXRlbXMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIGZhY2V0cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgYnJlYWRjcnVtYnMgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBodHRwOiBIdHRwQ2xpZW50KSB7IH1cblxuICBnZXRDb2xsZWN0aW9uQnlRdWVyeSh1cmw/OiBzdHJpbmcpIHtcbiAgICB1cmwgPSB1cmwgPyB1cmwgOiAnJztcbiAgICByZXR1cm4gdGhpcy5odHRwLmdldChlbnZpcm9ubWVudC5hcGlVcmwgKyAnY2F0ZWdvcnkvJyArIHVybCkuc3Vic2NyaWJlKFxuICAgICAgKGRhdGE6IGFueSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZGF0YS51bml2ZXJzZXMudW5pdmVyc2VbMF07XG4gICAgICAgIHRoaXMubWFwRnJlZEhvcHBlclByb2R1Y3RzVG9Qcm9kdWN0KHJlc3VsdFsnaXRlbXMtc2VjdGlvbiddLml0ZW1zLml0ZW0pO1xuICAgICAgICB0aGlzLm1hcEZyZWRIb3BwZXJGYWNldE1hcFRvRmFjZXRNYXAocmVzdWx0LmZhY2V0bWFwWzBdLmZpbHRlcik7XG4gICAgICAgIHRoaXMubWFwRnJlZEhvcHBlckJyZWFkY3J1bWJzVG9CcmVhZGNydW1icyhyZXN1bHQuYnJlYWRjcnVtYnMpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgbWFwRnJlZEhvcHBlckJyZWFkY3J1bWJzVG9CcmVhZGNydW1icyhicmVhZGNydW1iT2JqZWN0KSB7XG4gICAgICBjb25zdCBicmVhZGNydW1icyA9IFtdO1xuXG4gICAgICB0aGlzLmJyZWFkY3J1bWJzLmVtaXQoYnJlYWRjcnVtYk9iamVjdCk7XG4gICAgfVxuXG4gICAgbWFwRnJlZEhvcHBlckZhY2V0TWFwVG9GYWNldE1hcChsaXN0T2ZGcmVkSG9wcGVyRmFjZXRNYXBzOiBBcnJheTxhbnk+KSB7XG4gICAgICBsZXQgZmFjZXRzID0gW107XG4gICAgICBmYWNldHMgPSBsaXN0T2ZGcmVkSG9wcGVyRmFjZXRNYXBzO1xuICAgICAgdGhpcy5mYWNldHMuZW1pdChmYWNldHMpO1xuXG4gICAgfVxuXG4gICAgbWFwRnJlZEhvcHBlclByb2R1Y3RzVG9Qcm9kdWN0KGxpc3RPZkZyZWRIb3BwZXJQcm9kdWN0cykge1xuICAgICAgY29uc3QgaXRlbXMgPSBbXTtcbiAgICAgIGxpc3RPZkZyZWRIb3BwZXJQcm9kdWN0cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IGVsZW1lbnQuaWQ7XG4gICAgICAgIGNvbnN0IG5hbWVFbGVtZW50ID0gZWxlbWVudC5hdHRyaWJ1dGUuZmluZCh4ID0+IHgubmFtZSA9ICduYW1lJyk7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBuYW1lRWxlbWVudC52YWx1ZVswXS52YWx1ZTtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxQcmljZUVsZW1lbnQgPSBlbGVtZW50LmF0dHJpYnV0ZS5maW5kKHggPT4geC5uYW1lID09PSAnb3JpZ2luYWxfcHJpY2UnKTtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxQcmljZSA9IG9yaWdpbmFsUHJpY2VFbGVtZW50LnZhbHVlWzBdLnZhbHVlO1xuICAgICAgICBjb25zdCBjdXJyZW50UHJpY2VFbGVtZW50ID0gZWxlbWVudC5hdHRyaWJ1dGUuZmluZCh4ID0+IHgubmFtZSA9PT0gJ3ByaWNlJyk7XG4gICAgICAgIGNvbnN0IHNhbGVQcmljZSA9IGN1cnJlbnRQcmljZUVsZW1lbnQudmFsdWVbMF0udmFsdWUgIT09IG9yaWdpbmFsUHJpY2UgPyBjdXJyZW50UHJpY2VFbGVtZW50LnZhbHVlWzBdLnZhbHVlIDogJyc7XG4gICAgICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IGVsZW1lbnQuYXR0cmlidXRlLmZpbmQoeCA9PiB4Lm5hbWUgPT09ICdfdGh1bWJ1cmwnKTtcbiAgICAgICAgY29uc3QgaW1hZ2UgPSBpbWFnZUVsZW1lbnQudmFsdWVbMF0udmFsdWU7XG4gICAgICAgIGNvbnN0IGJyYW5kRWxlbWVudCA9IGVsZW1lbnQuYXR0cmlidXRlLmZpbmQoeCA9PiB4Lm5hbWUgPT09ICdicmFuZCcpO1xuICAgICAgICBjb25zdCBicmFuZCA9IGJyYW5kRWxlbWVudC52YWx1ZVswXS52YWx1ZSA/IGJyYW5kRWxlbWVudC52YWx1ZVswXS52YWx1ZSA6ICcnO1xuICAgICAgICBpdGVtcy5wdXNoKG5ldyBQcm9kdWN0KGlkLCBuYW1lLCBpbWFnZSwgb3JpZ2luYWxQcmljZSwgc2FsZVByaWNlLCAgYnJhbmQpKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5pdGVtcy5lbWl0KGl0ZW1zKTtcbiAgICB9XG5cbiAgICBuYXZpZ2F0ZVRvKHVybCkge1xuICAgICAgdGhpcy5nZXRDb2xsZWN0aW9uQnlRdWVyeSh1cmwpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFByb2R1Y3Qge1xuICBjb25zdHJ1Y3RvcihpZCwgbmFtZSwgaW1hZ2UsIG9yaWdpbmFsUHJpY2UsIHNhbGVQcmljZT8sICBicmFuZD8pIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLm9yaWdpbmFsUHJpY2UgPSBwYXJzZUZsb2F0KG9yaWdpbmFsUHJpY2UucmVwbGFjZSgvW14wLTlcXC4tXSsvZywgJycpKTtcbiAgICB0aGlzLnNhbGVQcmljZSA9IHBhcnNlRmxvYXQoc2FsZVByaWNlLnJlcGxhY2UoL1teMC05XFwuLV0rL2csICcnKSk7XG4gICAgdGhpcy5pbWFnZSA9IGltYWdlO1xuICAgIHRoaXMuYnJhbmQgPSBicmFuZDtcblxuICB9XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgb3JpZ2luYWxQcmljZTogbnVtYmVyO1xuICBzYWxlUHJpY2U/OiBudW1iZXI7XG4gIGltYWdlOiBzdHJpbmc7XG4gIGJyYW5kPzogc3RyaW5nO1xufVxuIl19